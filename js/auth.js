function _0x183a(_0x8e966f,_0x2edcb4){const _0x3db3a5=_0x3db3();return _0x183a=function(_0x183af5,_0x42716e){_0x183af5=_0x183af5-0x195;let _0x50eec4=_0x3db3a5[_0x183af5];return _0x50eec4;},_0x183a(_0x8e966f,_0x2edcb4);}const _0x3eaa27=_0x183a;(function(_0x49a098,_0x17905d){const _0x240bec=_0x183a,_0x1e93d3=_0x49a098();while(!![]){try{const _0x435fea=parseInt(_0x240bec(0x197))/0x1+parseInt(_0x240bec(0x1c0))/0x2+parseInt(_0x240bec(0x1a3))/0x3+parseInt(_0x240bec(0x1ab))/0x4*(-parseInt(_0x240bec(0x1b3))/0x5)+-parseInt(_0x240bec(0x1a6))/0x6+-parseInt(_0x240bec(0x1ae))/0x7*(-parseInt(_0x240bec(0x1c1))/0x8)+-parseInt(_0x240bec(0x1ce))/0x9;if(_0x435fea===_0x17905d)break;else _0x1e93d3['push'](_0x1e93d3['shift']());}catch(_0x1ed26e){_0x1e93d3['push'](_0x1e93d3['shift']());}}}(_0x3db3,0x81e1d));if(new Error()['stack']['includes'](_0x3eaa27(0x1b5)))throw new Error(_0x3eaa27(0x1a0));function _0x3db3(){const _0x254bf8=['localizeError','getItem','getElements','14149917xqWCew','value','insert','Ошибка\x20регистрации','setItem','showNotification','toString','631512IBybjD','guest','signUp','Гостевой\x20режим\x20не\x20имеет\x20доступа\x20к\x20этой\x20функции','select','employee','auth','addEventListener','touchstart','Доступ\x20запрещен','removeItem','user','2482065MsQBUv','wheel','Сессия\x20завершена\x20из-за\x20длительного\x20бездействия','3538488yUBIug','Гость','location','Гостевой\x20сеанс\x20завершён\x20из-за\x20бездействия','employees','1478912fTseCQ','category','Администратор','96887YwmceA','forEach','scroll','@app.local','Гостевой\x20доступ','5UsglIZ','removeEventListener','console','loginInput','signInWithPassword','mousemove','parse','hash','keydown','now','delete','Не\x20авторизован','warning','1770174yVyqzp','416DLrVtO','click','ВРС','passwordInput','Портал\x20гражданина','mousedown','from','update','message','showAuthMode'];_0x3db3=function(){return _0x254bf8;};return _0x3db3();}const Auth=(function(){const _0x55f8a5=_0x3eaa27;let _0x21324e=null,_0x497a57=_0x55f8a5(0x19d),_0x23b44a=null;const _0x32103d=0xf*0x3c*0x3e8,_0x515b54='lastActivityTime';function _0x5be955(){const _0x2245a3=_0x55f8a5;localStorage[_0x2245a3(0x1d2)](_0x515b54,Date[_0x2245a3(0x1bc)]()[_0x2245a3(0x196)]());}function _0x2f9803(){const _0x255756=_0x55f8a5,_0x3f2056=localStorage[_0x255756(0x1cc)](_0x515b54);if(!_0x3f2056)return![];return Date[_0x255756(0x1bc)]()-parseInt(_0x3f2056)>_0x32103d;}function _0x43dc01(){_0x5be955();if(_0x23b44a)clearTimeout(_0x23b44a);_0x21324e&&(_0x23b44a=setTimeout(()=>_0x13a1b2(),_0x32103d));}function _0x30f6e7(){const _0xc36b70=_0x55f8a5,_0x4e00c2=['mousedown',_0xc36b70(0x1b8),_0xc36b70(0x1bb),_0xc36b70(0x1b0),_0xc36b70(0x19f),'click','wheel'],_0xdb812=()=>_0x43dc01();_0x4e00c2[_0xc36b70(0x1af)](_0x4fbe24=>{const _0x510e71=_0xc36b70;document[_0x510e71(0x1b4)](_0x4fbe24,_0xdb812),document[_0x510e71(0x19e)](_0x4fbe24,_0xdb812);});}function _0x1e71d4(){const _0x3d8340=_0x55f8a5,_0x53351a=[_0x3d8340(0x1c6),_0x3d8340(0x1b8),_0x3d8340(0x1bb),_0x3d8340(0x1b0),_0x3d8340(0x19f),_0x3d8340(0x1c2),_0x3d8340(0x1a4)],_0x402d30=()=>_0x43dc01();_0x53351a[_0x3d8340(0x1af)](_0x1a23cc=>document[_0x3d8340(0x1b4)](_0x1a23cc,_0x402d30));}function _0x13a1b2(){const _0x14235b=_0x55f8a5;if(!_0x21324e)return;const _0x24d424=_0x573cff()?_0x14235b(0x1a9):_0x14235b(0x1a5);UI[_0x14235b(0x195)](_0x24d424,_0x14235b(0x1bf)),_0x5dacb6(),UI[_0x14235b(0x1ca)]();const _0x36c811=UI[_0x14235b(0x1cd)]();if(_0x36c811['loginInput'])_0x36c811[_0x14235b(0x1b6)][_0x14235b(0x1cf)]='';if(_0x36c811[_0x14235b(0x1c4)])_0x36c811['passwordInput']['value']='';window[_0x14235b(0x1a8)][_0x14235b(0x1ba)]='';}function _0x17dec7(_0x3558ba){const _0x5a6297=_0x55f8a5;_0x21324e=_0x3558ba,_0x497a57=_0x5a6297(0x19c),localStorage[_0x5a6297(0x1d2)](_0x5a6297(0x1a2),JSON['stringify'](_0x3558ba)),_0x5be955(),_0x30f6e7(),_0x43dc01();}function _0xd7dc7f(){const _0x442252=_0x55f8a5;return _0x5dacb6(),_0x497a57='guest',_0x21324e={'id':'guest','nickname':_0x442252(0x1a7),'rank':_0x442252(0x1b2),'department':_0x442252(0x1c5),'category':'Гость','isGuest':!![]},localStorage[_0x442252(0x1a1)](_0x442252(0x1a2)),_0x5be955(),_0x30f6e7(),_0x43dc01(),_0x21324e;}function _0x573cff(){return _0x497a57==='guest';}function _0x8c67f0(){const _0x977715=_0x55f8a5;return _0x497a57==='employee'&&_0x21324e?.[_0x977715(0x1ac)]===_0x977715(0x1ad);}function _0x46ebce(){const _0x111c60=_0x55f8a5;return _0x497a57===_0x111c60(0x19c)&&_0x21324e?.[_0x111c60(0x1ac)]===_0x111c60(0x1c3);}function _0x143d77(){const _0x2c533c=_0x55f8a5;return _0x497a57==='employee'&&(_0x21324e?.[_0x2c533c(0x1ac)]==='Администратор'||_0x21324e?.[_0x2c533c(0x1ac)]==='ВРС');}function _0xad2f8d(){return _0x143d77();}function _0x4eee8f(_0x49357b){const _0xfcd55d=_0x55f8a5;if(!_0x21324e)return![];if(_0x8c67f0())return!![];if(_0x46ebce()&&_0x49357b[_0xfcd55d(0x1ac)]!==_0xfcd55d(0x1ad))return!![];return![];}function _0x4bd907(_0x597dcc){const _0x4a6183=_0x55f8a5;if(!_0x21324e)return![];if(_0x8c67f0())return!![];if(_0x46ebce()&&_0x597dcc[_0x4a6183(0x1ac)]!==_0x4a6183(0x1ad))return!![];return![];}async function _0x2869de(_0x4f679a,_0x33efbf){const _0x44c13b=_0x55f8a5,_0x4a00e8=_0x4f679a+'@app.local',{data:_0x160955,error:_0x148f85}=await supabaseClient[_0x44c13b(0x19d)][_0x44c13b(0x1b7)]({'email':_0x4a00e8,'password':_0x33efbf});if(_0x148f85||!_0x160955[_0x44c13b(0x1a2)]){const _0x3033b5=ErrorHandler[_0x44c13b(0x1cb)](_0x148f85,'Неверные\x20данные\x20для\x20входа');throw new Error(_0x3033b5);}const _0x48bab6=_0x160955[_0x44c13b(0x1a2)]['id'],{data:_0x31b737,error:_0x21ef6c}=await supabaseClient[_0x44c13b(0x1c7)](_0x44c13b(0x1aa))[_0x44c13b(0x19b)]('*')['eq']('auth_user_id',_0x48bab6)['maybeSingle']();if(_0x21ef6c){const _0x2b2a49=ErrorHandler[_0x44c13b(0x1cb)](_0x21ef6c,'Ошибка\x20базы\x20данных');throw new Error(_0x2b2a49);}if(!_0x31b737)throw new Error('Пользователь\x20не\x20найден\x20в\x20системе');return _0x17dec7(_0x31b737),_0x31b737;}async function _0x4c2768({nickname:_0x3a764d,password:_0x5be3c1,rank:_0x4467b0,department:_0x5083e3,category:_0x27d647}){const _0x18c5c5=_0x55f8a5,_0x45aecc=_0x3a764d+_0x18c5c5(0x1b1),{data:_0x18a778,error:_0x53c50a}=await supabaseClient['auth'][_0x18c5c5(0x199)]({'email':_0x45aecc,'password':_0x5be3c1});if(_0x53c50a||!_0x18a778[_0x18c5c5(0x1a2)])throw new Error(_0x53c50a?.[_0x18c5c5(0x1c9)]||_0x18c5c5(0x1d1));const _0x223dc5=_0x18a778['user']['id'],{error:_0x4da5b7}=await supabaseClient[_0x18c5c5(0x1c7)]('employees')[_0x18c5c5(0x1d0)]([{'nickname':_0x3a764d,'rank':_0x4467b0,'department':_0x5083e3,'category':_0x27d647,'auth_user_id':_0x223dc5}]);if(_0x4da5b7)throw new Error(_0x4da5b7[_0x18c5c5(0x1c9)]);return await supabaseClient['auth'][_0x18c5c5(0x1b7)]({'email':_0x45aecc,'password':_0x5be3c1}),!![];}async function _0x515662(_0x3a5a93,_0x5b8e87,_0x59eead=null,_0x2e7a82=null){const _0x1b251a=_0x55f8a5;if(_0x573cff())throw new Error(_0x1b251a(0x19a));const _0x481d67=_0x33dd68();if(!_0x481d67)throw new Error(_0x1b251a(0x1be));const {data:{session:_0x4e12b5},error:_0x3dc21b}=await supabaseClient['auth']['getSession']();if(_0x3dc21b||!_0x4e12b5)throw new Error('Сессия\x20истекла');let _0x366ea2=supabaseClient[_0x1b251a(0x1c7)](_0x3a5a93);switch(_0x5b8e87){case _0x1b251a(0x19b):return await _0x366ea2[_0x1b251a(0x19b)]('*');case _0x1b251a(0x1d0):return await _0x366ea2['insert'](_0x59eead);case _0x1b251a(0x1c8):return await _0x366ea2['update'](_0x59eead)['eq']('id',_0x2e7a82);case _0x1b251a(0x1bd):return await _0x366ea2['delete']()['eq']('id',_0x2e7a82);default:return{'error':'Unknown\x20operation'};}}function _0x5dacb6(){const _0x357673=_0x55f8a5;_0x21324e=null,_0x497a57='auth',localStorage[_0x357673(0x1a1)](_0x357673(0x1a2)),localStorage[_0x357673(0x1a1)](_0x515b54),_0x23b44a&&(clearTimeout(_0x23b44a),_0x23b44a=null),_0x1e71d4();}function _0x49faf4(){const _0x2d76bc=_0x55f8a5;if(_0x497a57===_0x2d76bc(0x198))return _0x21324e;const _0x157598=localStorage[_0x2d76bc(0x1cc)](_0x2d76bc(0x1a2));if(!_0x157598)return null;if(_0x2f9803())return _0x5dacb6(),null;try{const _0x1cafd9=JSON[_0x2d76bc(0x1b9)](_0x157598);return _0x21324e=_0x1cafd9,_0x497a57='employee',_0x21324e&&(_0x30f6e7(),_0x43dc01()),_0x21324e;}catch{return null;}}function _0x33dd68(){return _0x21324e;}function _0x4c0115(){_0x43dc01();}function _0x32de9f(){return _0x497a57;}return{'restoreSession':_0x49faf4,'login':_0x2869de,'register':_0x4c2768,'logout':_0x5dacb6,'getCurrentUser':_0x33dd68,'isAdmin':_0x8c67f0,'isVRS':_0x46ebce,'isAdminOrVRS':_0x143d77,'canManageUsers':_0xad2f8d,'canDeleteUser':_0x4eee8f,'canEditUser':_0x4bd907,'ping':_0x4c0115,'secureRequest':_0x515662,'startGuestSession':_0xd7dc7f,'isGuest':_0x573cff,'getCurrentMode':_0x32de9f};}());window['Auth']=Auth;
