<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ì–ò–ë–î–î ¬∑ –ï–¥–∏–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    
    <link rel="icon" type="image/x-icon" href="img/icon.ico">
    <link rel="shortcut icon" href="img/icon.ico">
    <link rel="apple-touch-icon" href="img/icon.png">
    
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app" id="appRoot">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–æ—Å–∞ -->
        <div class="top-bar hidden" id="topBar">
            <div class="system-title">
                –£–ì–ò–ë–î–î ¬∑ <span id="systemTitleSpan">–ï–¥–∏–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</span>
            </div>
            <div class="user-badge" id="userInfo"></div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
        <div class="nav-bar hidden" id="navBar">
            <div class="nav-group">
                <button class="nav-btn" id="navHome">–ì–ª–∞–≤–Ω–∞—è</button>
                <button class="nav-btn" id="navProfile">–ü—Ä–æ—Ñ–∏–ª—å</button>
                <button class="nav-btn" id="navKusp">–ö–£–°–ü</button>
				<button class="nav-btn" id="navProtocols">–ü—Ä–æ—Ç–æ–∫–æ–ª—ã</button>
				<button class="nav-btn" id="navTsu">–ù–∞–≤–æ–¥–∫–∏</button>
                <button class="nav-btn" id="navAdmin" hidden>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
            </div>
            <div class="nav-group">
                <button class="nav-btn logout" id="navLogout">–í—ã—Ö–æ–¥</button>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –≥–æ—Å—Ç–µ–π -->
        <div class="nav-bar hidden" id="guestNavBar">
            <div class="nav-group">
                <button class="nav-btn" id="guestNavHome">–ì–ª–∞–≤–Ω–∞—è</button>
                <button class="nav-btn" id="guestNavAppeals">–ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</button>
				<button class="nav-btn" id="guestNavDriverLicense">–®—Ç—Ä–∞—Ñ—ã</button>
                <button class="nav-btn" id="guestNavInfo">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
            </div>
            <div class="nav-group">
                <button class="nav-btn" id="guestNavToEmployee">üëÆ‚Äç‚ôÇÔ∏è –í—Ö–æ–¥ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</button>
            </div>
        </div>

        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å -->
        <div class="main-stage" id="centerStage">
            <div class="content-card" id="workPanel">
                <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
                <div id="authSection">
                    <div class="system-badge">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <img src="img/emblem.png" alt="–≠–º–±–ª–µ–º–∞" style="width: 300px; height: auto;">
                        </div>
                        <div class="system-title">–£–ì–ò–ë–î–î –ú–í–î –ø–æ –†–µ—Å–ø—É–±–ª–∏–∫–µ –ü—Ä–æ–≤–∏–Ω—Ü–∏—è</div>
                        <div class="system-subtitle">–ï–¥–∏–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</div>
                    </div>
                    
                    <div class="auth-container">
                        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –¥–ª—è –≥—Ä–∞–∂–¥–∞–Ω -->
                        <div class="auth-card">
                            <h2>–í—Ö–æ–¥ –¥–ª—è –≥—Ä–∞–∂–¥–∞–Ω</h2>
                            <button class="guest-button" id="guestAccessBtn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –≥–æ—Å—Ç–µ–≤–æ–º—É –¥–æ—Å—Ç—É–ø—É</button>
                            <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏–π –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.</p>
                            <div style="flex:1"></div>
                        </div>

                        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                        <div class="auth-card">
                            <h2>–í—Ö–æ–¥ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h2>
                            
                            <div class="form-group">
                                <label for="login">–õ–æ–≥–∏–Ω</label>
                                <input type="text" id="login" name="login" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
                            </div>
                            
                            <div class="form-group">
                                <label for="password">–ü–∞—Ä–æ–ª—å</label>
                                <input type="password" id="password" name="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                            </div>
                            
                            <button class="login-btn" id="loginBtn">–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</button>
                            
                            <div style="flex:1"></div>
                        </div>
                    </div>
                    
                    <div class="auth-footer">
                        ¬© –£–ì–ò–ë–î–î –ú–í–î –ø–æ –†–µ—Å–ø—É–±–ª–∏–∫–µ –ü—Ä–æ–≤–∏–Ω—Ü–∏—è, 2026. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
                    </div>
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) -->
                <div id="mainApp" class="hidden"></div>
            </div>
        </div>
    </div>

    <!-- –®–∞–±–ª–æ–Ω—ã –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
    <template id="homeTemplate">
        <div>
            <h2>–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</h2>
            <div id="greetingMessage" style="font-size:1.3rem; background:#f2f7ff; padding:16px 20px; border-radius:20px; margin-bottom:20px;"></div>
            <p style="color:#34597a;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –µ–¥–∏–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –£–ì–ò–ë–î–î.</p>
            <p style="margin-top:16px;">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã.</p>
        </div>
    </template>

    <template id="profileTemplate">
        <div>
            <h2>–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
            <div class="info-row"><span class="info-label">–õ–æ–≥–∏–Ω</span><span class="info-value" id="profileNickname"></span></div>
            <div class="info-row"><span class="info-label">–ó–≤–∞–Ω–∏–µ</span><span class="info-value" id="profileRank"></span></div>
            <div class="info-row"><span class="info-label">–û—Ç–¥–µ–ª</span><span class="info-value" id="profileDepartment"></span></div>
            <div class="info-row"><span class="info-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span><span class="info-value" id="profileCategory"></span></div>
        </div>
    </template>

    <template id="adminTemplate">
        <div style="height: 100%; display: flex; flex-direction: column;">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏</h2>
            
            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <div style="display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid #eaf0f8; padding-bottom: 8px; flex-wrap: wrap;">
				<button id="manageTabBtn" class="nav-btn active" style="border-radius: 30px;">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏</button>
				<button id="createTabBtn" class="nav-btn" style="border-radius: 30px;">‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤</button>
				<button id="logsTabBtn" class="nav-btn" style="border-radius: 30px;">üìã –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π</button>
			</div>

            <!-- –°–µ–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ -->
            <div id="manageAccountsSection" style="flex: 1; display: flex; flex-direction: column;">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ</h3>
                <div style="background: #f5f9ff; border-radius: 24px; padding: 16px; flex: 1; overflow-y: auto;">
                    <div id="employeesManageList" style="list-style: none; padding: 0;"></div>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ -->
            <div id="createAccountSection" class="hidden" style="flex: 1; display: flex; flex-direction: column;">
                <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h3>
                <div style="background: #f5f9ff; border-radius: 24px; padding: 24px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="nickname">–õ–æ–≥–∏–Ω <span class="required">*</span></label>
                        <input id="nickname" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞">
                    </div>
                    
                    <div class="form-group">
                        <label for="newPassword">–ü–∞—Ä–æ–ª—å <span class="required">*</span></label>
                        <input id="newPassword" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <small class="field-hint">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: 6 —Å–∏–º–≤–æ–ª–æ–≤</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="rank">–ó–≤–∞–Ω–∏–µ <span class="required">*</span></label>
                        <input id="rank" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å—Ç–∞—Ä—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç">
                    </div>
                    
                    <div class="form-group">
                        <label for="department">–û—Ç–¥–µ–ª <span class="required">*</span></label>
                        <input id="department" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–ë">
                    </div>
                    
                    <div class="form-group">
                        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è <span class="required">*</span></label>
                        <select id="category">
                            <option value="–ú–°">–ú–ª–∞–¥—à–∏–π —Å–æ—Å—Ç–∞–≤ (–ú–°)</option>
                            <option value="–†–°">–†—É–∫–æ–≤–æ–¥—è—â–∏–π —Å–æ—Å—Ç–∞–≤ (–†–°)</option>
                            <option value="–í–†–°">–í—ã—Å—à–∏–π —Ä—É–∫–æ–≤–æ–¥—è—â–∏–π —Å–æ—Å—Ç–∞–≤ (–í–†–°)</option>
                            <option value="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è</option>
                        </select>
                    </div>
                    
                    <button id="createUserBtn" style="margin-top: 16px;">‚ûï –°–æ–∑–¥–∞—Ç—å —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å</button>
                </div>
            </div>
			
			<!-- –°–µ–∫—Ü–∏—è –∂—É—Ä–Ω–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏–π -->
			<div id="logsSection" class="hidden" style="flex: 1; display: flex; flex-direction: column;">
				<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 10px;">
					<h3 style="margin:0;">–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø–∏—Å–µ–π)</h3>
					<div style="display: flex; gap: 8px; flex-wrap: wrap;">
						<select id="logFilterAction" style="width: 150px;">
							<option value="">–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è</option>
							<option value="employee_create">–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</option>
							<option value="employee_update">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
							<option value="employee_delete">–£–¥–∞–ª–µ–Ω–∏–µ</option>
							<option value="kusp_create">–°–æ–∑–¥–∞–Ω–∏–µ –ö–£–°–ü</option>
							<option value="kusp_update">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ö–£–°–ü</option>
							<option value="kusp_delete">–£–¥–∞–ª–µ–Ω–∏–µ –ö–£–°–ü</option>
							<option value="user_login">–í—Ö–æ–¥—ã –≤ —Å–∏—Å—Ç–µ–º—É</option>
						</select>
						<input type="date" id="logFilterDate" style="width: 140px;">
						<button id="refreshLogsBtn" class="small secondary">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
						<button id="exportLogsBtn" class="small secondary">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
					</div>
				</div>
				<div style="background: #f5f9ff; border-radius: 24px; padding: 16px; flex: 1; overflow-y: auto;">
					<div id="logsList" style="display: flex; flex-direction: column; gap: 8px;"></div>
				</div>
			</div>
        </div>
    </template>

	

    <template id="kuspListTemplate">
        <div style="height: 100%; display: flex; flex-direction: column;">
            <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 20px; flex-shrink: 0;">
                <h2 style="margin:0; border:none;">–ö–£–°–ü</h2>
                <input type="text" id="kuspSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –∏–ª–∏ –∑–∞—è–≤–∏—Ç–µ–ª—é" style="flex:1;">
                <select id="kuspFilterStatus" style="width:150px;">
                    <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                    <option value="new">–ù–æ–≤—ã–µ</option>
                    <option value="in_progress">–í —Ä–∞–±–æ—Ç–µ</option>
                    <option value="closed">–ó–∞–∫—Ä—ã—Ç—ã–µ</option>
                </select>
                <button id="kuspCreateOpen" class="secondary">+ –°–æ–∑–¥–∞—Ç—å</button>
            </div>
            <div class="list-panel" id="kuspList" style="flex:1;"></div>
        </div>
    </template>

    <!-- –®–∞–±–ª–æ–Ω—ã –¥–ª—è –≥–æ—Å—Ç–µ–π -->
    <template id="guestHomeTemplate">
        <div>
            <h2>–ü–æ—Ä—Ç–∞–ª –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞</h2>
            <div style="background:#f2f7ff; padding:20px; border-radius:20px; margin-bottom:20px;">
                <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç–∞–ª –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –£–ì–ò–ë–î–î.</p>
                <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:</p>
                <ul style="margin-top:10px; list-style:disc; padding-left:20px;">
                    <li>–û—Ç—Å–ª–µ–¥–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞—â–µ–Ω–∏—è –ø–æ –Ω–æ–º–µ—Ä—É —Ç–∞–ª–æ–Ω–∞-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
					<li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —à—Ç—Ä–∞—Ñ–æ–≤ –ø–æ –Ω–æ–º–µ—Ä—É –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è</li>
                    <li>–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–±–æ—Ç–µ –£–ì–ò–ë–î–î</li>
                </ul>
            </div>
        </div>
    </template>

	<template id="protocolListTemplate">
        <div style="height: 100%; display: flex; flex-direction: column;">
            <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 20px; flex-shrink: 0;">
                <h2 style="margin:0; border:none;">–ü—Ä–æ—Ç–æ–∫–æ–ª—ã –æ–± –ê–ü</h2>
                <input type="text" id="protocolSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –§–ò–û, –ì–†–ó, –Ω–æ–º–µ—Ä—É –í–£" style="flex:1;">
                <select id="protocolFilterStatus" style="width:150px;">
                    <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                    <option value="active">–î–µ–π—Å—Ç–≤—É—é—â–∏–µ</option>
                    <option value="archived">–ê—Ä—Ö–∏–≤–Ω—ã–µ</option>
                </select>
                <button id="protocolCreateOpen" class="secondary">+ –ù–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª</button>
            </div>
            <div class="list-panel" id="protocolList" style="flex:1;"></div>
        </div>
    </template>

    <template id="guestAppealsTemplate">
		<div style="margin: 0 auto;">
			<h2>–ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</h2>
			
			<!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∏—Å–∫–∞ -->
			<div style="background: #f5f9ff; border-radius: 20px; padding: 30px; box-shadow: 0 4px 12px rgba(0, 20, 40, 0.08);">
				<p style="font-size: 1.1rem; color: #1e3a5f; margin-bottom: 20px; font-weight: 500;">
					–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–∞–ª–æ–Ω–∞-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ö–£–°–ü
				</p>
				
				<!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ -->
				<div class="form-group" style="margin-bottom: 20px;">
					<label for="appealNumber" style="display: block; margin-bottom: 8px; font-weight: 500; color: #2d5a7a;">
						–ù–æ–º–µ—Ä —Ç–∞–ª–æ–Ω–∞-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
					</label>
					<input type="text" 
						   id="appealNumber" 
						   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2026-01-01-123" 
						   style="width: 100%; padding: 12px 16px; font-size: 1rem; border: 2px solid #d8e2ed; border-radius: 12px; background: white; box-sizing: border-box;">
					<small style="display: block; margin-top: 6px; color: #6b7f99; font-size: 0.85rem;">
						–ù–æ–º–µ—Ä —É–∫–∞–∑–∞–Ω –≤ —Ç–∞–ª–æ–Ω–µ-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏, –≤—ã–¥–∞–Ω–Ω–æ–º –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è
					</small>
				</div>
				
				<!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ -->
				<div style="display: flex; gap: 12px; align-items: center;">
					<button id="findAppealBtn" class="secondary" style="padding: 12px 28px; font-size: 1rem; background: #1e3a5f; color: white; border: none;">
						üîç –ù–∞–π—Ç–∏ –æ–±—Ä–∞—â–µ–Ω–∏–µ
					</button>
				</div>
			</div>
			
			<!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ -->
			<div id="appealResult" style="margin-top: 25px;"></div>
		</div>
	</template>

    <template id="guestInfoTemplate">
        <div>
            <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div style="background:#f5f9ff; padding:20px; border-radius:20px;">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <p>üìû –î–µ–∂—É—Ä–Ω–∞—è —á–∞—Å—Ç—å: 8 (222) 555-58-48</p>
				<p>üìç –ê–¥—Ä–µ—Å: –≥. –ú–∏—Ä–Ω—ã–π, –ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è, –¥. 2</p>
                <p>üìß Forum: <a href="https://forum.gtaprovince.ru/forum/1182-ugibdd/" target="_blank" rel="noopener noreferrer">https://forum.gtaprovince.ru/forum/1182-ugibdd/</a></p>
				<p>üì∞ –ù–æ–≤–æ—Å—Ç–∏ –í–ö: <a href="https://vk.com/ugibddm.province_one" target="_blank" rel="noopener noreferrer">https://vk.com/ugibddm.province_one</a></p>   
                
                <h3 style="margin-top:20px;">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</h3>
                <p>–ü–Ω-–ü—Ç: 09:00 - 18:00</p>
				<p>–°–±: 10:00 - 17:00</p>
                <p>–í—Å: –í—ã—Ö–æ–¥–Ω–æ–π</p>
            </div>
        </div>
    </template>
	
	<template id="guestDriverLicenseTemplate">
		<div style="margin: 0 auto;">
			<h2>–®—Ç—Ä–∞—Ñ—ã</h2>
			
			<!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∏—Å–∫–∞ -->
			<div style="background: #f5f9ff; border-radius: 20px; padding: 30px; box-shadow: 0 4px 12px rgba(0, 20, 40, 0.08);">
				
				<p style="font-size: 1.1rem; color: #1e3a5f; margin-bottom: 20px; font-weight: 500;">
					–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —à—Ç—Ä–∞—Ñ–æ–≤ –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
				</p>
				
				<!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
				<div class="form-group" style="margin-bottom: 20px;">
					<label for="driverLicenseNumber" style="display: block; margin-bottom: 8px; font-weight: 500; color: #2d5a7a;">
						–ù–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
					</label>
					
					<input type="text" 
						   id="driverLicenseNumber" 
						   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 123456"
						   maxlength="20"
						   style="width: 100%; padding: 12px 16px; font-size: 1rem; border: 2px solid #d8e2ed; border-radius: 12px; background: white; box-sizing: border-box;">
					
					<small style="display: block; margin-top: 6px; color: #6b7f99; font-size: 0.85rem;">
						–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é
					</small>
				</div>
				
				<!-- –ö–Ω–æ–ø–∫–∞ -->
				<div style="display: flex; gap: 12px; align-items: center;">
					<button id="findDriverLicenseBtn"
							style="padding: 12px 28px; font-size: 1rem; background: #1e3a5f; color: white; border: none; border-radius: 12px; cursor: pointer;">
						üîç –ù–∞–π—Ç–∏ —à—Ç—Ä–∞—Ñ—ã
					</button>
				</div>
			</div>
			
			<!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
			<div id="driverLicenseResult" style="margin-top: 25px;">
				
				<div id="driverLicenseResults" style="display: none;">
					<h3 style="margin-bottom: 15px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h3>
					
					<div id="violatorInfo" 
						 style="background:#f0f7ff; padding:20px; border-radius:16px; margin-bottom:20px;">
					</div>
					
					<div id="protocolsList" 
						 style="display:flex; flex-direction:column; gap:12px;">
					</div>
				</div>
				
				<div id="noProtocolsMessage"
					 style="display:none; background:#fff3cd; padding:20px; border-radius:16px; color:#856404;">
					–ü–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—é —à—Ç—Ä–∞—Ñ—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
				</div>
				
			</div>
		</div>
	</template>
	
	<!-- –®–∞–±–ª–æ–Ω –¥–ª—è —Å–ø–∏—Å–∫–∞ –Ω–∞–≤–æ–¥–æ–∫ TSU -->
	<template id="tsuListTemplate">
		<div style="height: 100%; display: flex; flex-direction: column;">
			<div style="display: flex; gap: 12px; align-items: center; margin-bottom: 20px; flex-shrink: 0;">
				<h2 style="margin:0; border:none;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–æ–¥–∫–∞–º–∏</h2>
				<input type="text" id="tsuSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∏–∫—É, –ø—Ä–∏—á–∏–Ω–µ, –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É" style="flex:1;">
				<select id="tsuFilterType" style="width:150px;">
					<option value="">–í—Å–µ —Ç–∏–ø—ã</option>
					<option value="fine">–®—Ç—Ä–∞—Ñ—ã</option>
					<option value="license">–õ–∏—à–µ–Ω–∏–µ –í–£</option>
					<option value="wanted_person">–†–æ–∑—ã—Å–∫ —á–µ–ª–æ–≤–µ–∫–∞</option>
					<option value="wanted_car">–†–æ–∑—ã—Å–∫ –º–∞—à–∏–Ω—ã</option>
					<option value="wanted_car_remove">–°–Ω—è—Ç–∏–µ –º–∞—à–∏–Ω—ã —Å —Ä–æ–∑—ã—Å–∫–∞</option>
				</select>
				<select id="tsuFilterStatus" style="width:150px;">
					<option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
					<option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
					<option value="completed">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</option>
					<option value="expired">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ</option>
				</select>
				<button id="tsuCreateOpen" class="secondary">+ –°–æ–∑–¥–∞—Ç—å –Ω–∞–≤–æ–¥–∫—É</button>
			</div>
			<div class="list-panel" id="tsuList" style="flex:1;"></div>
		</div>
	</template>

	<!-- –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–≤–æ–¥–∫–∏ TSU -->
	<template id="tsuFormTemplate">
		<div style="height: 100%; display: flex; flex-direction: column;">
			<div style="display: flex; gap: 12px; align-items: center; margin-bottom: 20px; flex-shrink: 0;">
				<h2 style="margin:0; border:none;" id="tsuFormTitle">–ù–æ–≤–∞—è –Ω–∞–≤–æ–¥–∫–∞ TSU</h2>
			</div>
			
			<div style="background: #f5f9ff; border-radius: 20px; padding: 24px; margin-bottom: 20px;">
				<form id="tsuForm">
					<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
						<div class="form-group">
							<label for="tsu_type">–¢–∏–ø –Ω–∞–≤–æ–¥–∫–∏ <span class="required">*</span></label>
							<select id="tsu_type" required>
								<option value="fine">–í—ã–ø–∏—Å–∞—Ç—å —à—Ç—Ä–∞—Ñ (/tsu)</option>
								<option value="license">–õ–∏—à–µ–Ω–∏–µ –í–£ (/takecarlic)</option>
								<option value="wanted_person">–ü–æ–¥–∞—Ç—å –≤ —Ä–æ–∑—ã—Å–∫ (/su)</option>
								<option value="wanted_car">–†–æ–∑—ã—Å–∫ –º–∞—à–∏–Ω—ã (/addwcar)</option>
								<option value="wanted_car_remove">–°–Ω—è—Ç–∏–µ —Ä–æ–∑—ã—Å–∫–∞ —Å –º–∞—à–∏–Ω—ã (/delwcar)</option>
							</select>
						</div>
						
						<div class="form-group">
							<label for="tsu_target_nick">–ù–∏–∫ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è <span class="required">*</span></label>
							<input type="text" id="tsu_target_nick" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ –∏–≥—Ä–æ–∫–∞">
						</div>
						
						<div class="form-group" id="tsu_amount_field">
							<label for="tsu_amount">–°—É–º–º–∞ —à—Ç—Ä–∞—Ñ–∞</label>
							<input type="number" id="tsu_amount" min="1" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 5000">
						</div>
						
						<div class="form-group" id="tsu_days_field" style="display: none;">
							<label for="tsu_days">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ª–∏—à–µ–Ω–∏—è</label>
							<input type="number" id="tsu_days" min="0" max="4" placeholder="0-4">
						</div>
						
						<div class="form-group" id="tsu_stars_field" style="display: none;">
							<label for="tsu_stars">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥</label>
							<input type="number" id="tsu_stars" min="1" max="6" placeholder="1-6">
						</div>
						
						<div class="form-group" id="tsu_plate_field" style="display: none;">
							<label for="tsu_car_plate">–ì–æ—Å–Ω–æ–º–µ—Ä</label>
							<input type="text" id="tsu_car_plate" placeholder="A000AA">
						</div>
						
						<div class="form-group" id="tsu_region_field" style="display: none;">
							<label for="tsu_car_region">–†–µ–≥–∏–æ–Ω (2 —Ü–∏—Ñ—Ä—ã)</label>
							<input type="text" id="tsu_car_region" maxlength="2" placeholder="77">
						</div>
						
						<div class="form-group" style="grid-column: span 2;">
							<label for="tsu_reason">–ü—Ä–∏—á–∏–Ω–∞ <span class="required">*</span></label>
							<textarea id="tsu_reason" rows="3" required placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É"></textarea>
						</div>
						
						<div class="form-group">
							<label for="tsu_initiator_nick">–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä<span class="required">*</span></label>
							<input type="text" id="tsu_initiator_nick" required placeholder="–ù–∏–∫ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞">
						</div>
						
						<div class="form-group">
							<label for="tsu_expires_at">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ <span class="required">*</span></label>
							<input type="date" id="tsu_expires_at" required>
							<small class="field-hint">–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É, –¥–æ –∫–æ—Ç–æ—Ä–æ–π –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞–≤–æ–¥–∫–∞ (–Ω–µ –±–æ–ª–µ–µ 14-—Ç–∏ –¥–Ω–µ–π)</small>
						</div>
					</div>
					
					<div class="flex-row" style="justify-content: flex-end; margin-top: 24px; gap: 12px;">
						<button type="button" id="tsuFormCancel" class="secondary">–û—Ç–º–µ–Ω–∞</button>
						<button type="submit" id="tsuFormSubmit" class="primary">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–∞–≤–æ–¥–∫—É</button>
					</div>
				</form>
			</div>
			
			<div style="background: #e8f4fd; border-radius: 16px; padding: 16px; border-left: 4px solid #1e3a5f;">
				<h4 style="margin: 0 0 8px 0; color: #1e3a5f;">üìã –§–æ—Ä–º–∞—Ç—ã –∫–æ–º–∞–Ω–¥:</h4>
				<ul style="margin: 0; padding-left: 20px; color: #2d5a7a;">
					<li><strong>/tsu [–Ω–∏–∫] [—Å—É–º–º–∞] [–ø—Ä–∏—á–∏–Ω–∞] by [–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä] (–£–ì–ò–ë–î–î)</strong> - —à—Ç—Ä–∞—Ñ</li>
					<li><strong>/takecarlic [–Ω–∏–∫] [–¥–Ω–∏ 0-4] [–ø—Ä–∏—á–∏–Ω–∞] by [–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä] (–£–ì–ò–ë–î–î)</strong> - –ª–∏—à–µ–Ω–∏–µ –í–£</li>
					<li><strong>/su [–Ω–∏–∫] [–∑–≤—ë–∑–¥—ã 1-6] [–ø—Ä–∏—á–∏–Ω–∞] by [–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä] (–£–ì–ò–ë–î–î)</strong> - —Ä–æ–∑—ã—Å–∫ —á–µ–ª–æ–≤–µ–∫–∞</li>
					<li><strong>/addwcar [–ì–†–ó A000AA] [—Ä–µ–≥–∏–æ–Ω 77] [–ø—Ä–∏—á–∏–Ω–∞] by [–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä] (–£–ì–ò–ë–î–î)</strong> - —Ä–æ–∑—ã—Å–∫ –º–∞—à–∏–Ω—ã</li>
					<li><strong>/delwcar [–ì–†–ó A000AA] [—Ä–µ–≥–∏–æ–Ω 77] by [–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä]</strong> - —Å–Ω—è—Ç–∏–µ —Å —Ä–æ–∑—ã—Å–∫–∞</li>
				</ul>
				<p style="margin: 8px 0 0 0; font-size: 0.9rem; color: #6b7f99;">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–≤–æ–¥–æ–∫: 14 –¥–Ω–µ–π</p>
			</div>
		</div>
	</template>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- html2canvas –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–ª–æ–Ω–æ–≤ –≤ PNG -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="js/config.js"></script>
    <script src="js/error-handler.js"></script> 
	<script src="js/logger.js"></script>
    <script src="js/permissions.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/supabase-admin-client.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/kusp.js"></script>
	<script src="js/protocol.js"></script> 
	<script src="js/driver-license.js"></script>
	<script src="js/tsu.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
